<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Resultados del Robot - OMPULSE</title>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<style>
  body {
    background: #000;
    color: #fff;
    font-family: 'Inter', sans-serif;
    margin: 0;
    padding: 2rem;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  h1 {
    background: linear-gradient(to right, #FFD700, #FFA500);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-size: 2rem;
    margin-bottom: 2rem;
  }
  #graficoRobot {
    width: 90%;
    max-width: 900px;
    height: 500px;
  }
</style>
</head>
<body>
<h1>Resultados diarios del robot de trading</h1>
<div id="graficoRobot"></div>

<script>
  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(cargarDatos);

  function cargarDatos() {
    const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQis1cGNIm9CjUFMGTk51MknoBOTbLGTBnGTuSXKyE5gKaRSFIFnukt835fKLAjsCvnwb2g9J3pDf8f/pub?gid=0&single=true&output=csv';
    
    Papa.parse(csvUrl, {
      download: true,
      header: true,
      dynamicTyping: true,
      complete: function(results) {
        const dataArray = [['Fecha', 'Resultado']];
        results.data.forEach(row => {
          if (row.Fecha && row.Resultado !== undefined) {
            dataArray.push([row.Fecha, row.Resultado]);
          }
        });

        const data = google.visualization.arrayToDataTable(dataArray);

        const options = {
          title: 'Resultados diarios del robot de trading',
          curveType: 'function',
          legend: { position: 'bottom' },
          height: 500,
          backgroundColor: 'transparent',
          colors: ['#FFD700'],
          hAxis: { title: 'Fecha' },
          vAxis: { title: 'Resultado (â‚¬)' },
        };

        const chart = new google.visualization.LineChart(document.getElementById('graficoRobot'));
        chart.draw(data, options);
      }
    });
  }
</script>
</body>
</html>
